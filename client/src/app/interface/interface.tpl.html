<h1 class="title">{{selectedFeed | title}} Feeds</h1>

<form class="form-horizontal col-sm-7 well" role="form">

	<div class="form-group">
		<label for="feed" class="col-sm-3 control-label text-info mid-font">Select your Feed: </label>
		<div class="col-sm-6">
			<select class="form-control"
			        id="feed"
			        ng-model="selectedFeed"
			        ng-change="selectFeed(selectedFeed)"
			        ng-options="feed for feed in feeds"></select>
		</div>
	</div>

	<div class="form-group">
		<label for="limit" class="col-sm-3 control-label text-info mid-font">Results per page: </label>
		<div class="col-md-6">
			<input class="form-control" id="limit" ng-model="limit" ng-blur="autoUpdate()"/>
		</div>
	</div>

	<div class="form-group">
		<div class="col-lg-offset-3 add-padding">
			<a class="btn btn-primary" ng-click="updateData()">
				<span class="glyphicon glyphicon glyphicon-refresh"></span> Update
			</a>

			<a class="btn btn-warning" ng-click="reset()">
				<span class="glyphicon glyphicon-repeat"></span> Reset
			</a>

			<a class="btn btn-success"
			   target="_self"
			   ng-href="/api/feeds/download/{{selectedFeed | title}}/{{stringify(criteria)}}">
				<span class="glyphicon glyphicon-cloud-download"></span> Download Results
			</a>
		</div>
		<!--<div class="checkbox"><label><input type="checkbox" ng-model="automaticUpdate"> Update Automatically</label></div>-->
	</div>
</form>

<div class="col-sm-5">
	<div class="pag-dividor"></div>
	<div ng-show="count!=0" class="text-primary result-text">{{count}} events found </div>
	<pagination ng-model="currentPage"
	            ng-change="updateData()"
	            total-items="count"
	            items-per-page="limit"
	            max-size="paginationCells"
	            class="pagination-sm pag center-block"
	            boundary-links="true"
	            rotate="false">
	</pagination>
</div>

<div class="table-container">
	<table class="table table-bordered table-striped table-hover">

		<tr>
			<th>Serial</th>
			<th ng-repeat="header in headers track by $index" class="overflow-ellipsis">
				<div>{{header}}</div>

				<div class="field_input">
					<input ng-model="filters[header]"
					       ng-change="updateCriteria(header, schema, filters, criteria)"
						/>
					<img src="/static/img/search-icon.png"
					     class="field_img"
					     ng-click="openModal(filters, header)"/>
				</div>
			</th>
		</tr>

		<tr ng-if="events.length==0">
			<td colspan="{{headers.length}}">
				<h3>No events were found</h3>
			</td>
		</tr>


		<tr ng-repeat="event in events track by $index" ng-controller="rowController">
			<td>{{ (currentPage - 1) * limit + $index + 1 }}</td>
			<td ng-repeat="header in headers" ng-click="fullContent()">
				<div>{{ getEventField(event, schema, header)|limitCharacters:50:tc }}</div>
			</td>
		</tr>
	</table>
</div>